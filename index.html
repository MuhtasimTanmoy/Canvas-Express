<!doctype html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="./semantic-ui/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="./main.css">
    <link rel="stylesheet" type="text/css" href="./chessboard.css">
    <script src="/jquery/dist/jquery.js"></script>
    

</head>

<body>
  <div>

    <!-- <div style="background: radial-gradient(rgb(27, 201, 142), rgb(11, 90, 63)); z-index: 5; transform: translate3d(0px, 0px, 0px);">
      <div id="particlesContainer"><canvas class="particles-js-canvas-el flipthis-highlight" style="width: 100%; height: 100%;" width="306" height="678"></canvas></div> -->

    <div class="ui button"><a href="http://localhost:3000/#chess_section">Connect</a></div>
    </div>

  <div class="ui">
    <div class="ui prompt modal">
      <div class="header" id="setPromptHeader"></div>
      <div class="content" id="setPromptContent">
      </div>
      <div class="actions">
        <div class="ui blue approve button">Ok</div>
      </div>
    </div>
    <div class="ui decision modal">
      <div class="header" id="setDecisionHeader">Decision</div>
      <div class="content" id="setDecisionContent">
      </div>

      <div class="actions">
        <div class="ui blue approve button">Ok</div>
        <div class="ui cancel button">Cancel</div>
      </div>
    </div>


    <div class="ui equal width center aligned padded grid">
      <div class="row" style="padding-top:40px">
        <div class="teal column">
        </div>
        <div class="teal column">
          <div class="ui text">Canvas</div>
        </div>
        <div class="teal column">
        </div>
      </div>
      <div class="row">
        <div class="column">
          <div class="ui segment" id="myId"></div>
        </div>
      </div>
      <div class="row">
        <div class="column">
          <div class="ui left icon input">
            <input type="text" placeholder="Partner id" id="partner">
            <i class="users icon"></i>
          </div>
          <div id="connect_notify"></div>
          <div class="ui button red" style="display:none" id="disconnect" onClick=disconnect()>Disconnect</div>
        </div>
      </div>
      <div class="row">
        <div class="ui input">
          <input type="text" placeholder="Your message" id="message">
        </div>
        <div class="ui blue button" onclick=test()>Test</div>
      </div>
      <div class="row">
        <div class="column">
          <section id="draw">
            <div class="row" style="padding-top: 20px">
              <canvas id="canvas" resize="" style="user-select: none; touch-action: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(1, 0, 0, 0);" width="1046" height="553" data-paper-scope="1">

              </canvas>

              <div class="ui button blue" id="drawMode" onCLick=toggleMode()>Point Mode</div>
              <div class="ui button blue" onclick="my_clear()">Clean</div>
            </div>
          </section>
        </div>

      </div>

      <div class="row" style="padding-top:30px">
        <div class="column">
          <div class="ui blue inverted segment">
            <h2>Send File</h2>
          </div>

          <div class="ui segment">
            <div>
              <label for="file" class="ui icon blue button">
          <i class="file icon"></i>
          Open File</label>
              <input type="file" id="file" style="display:none" onchange="openFile(event)">
            </div>
          </div>

          <div class="ui segment">
            <div id="progress" style="display: none;">
						Received <span id="downloaded"></span> of <span id="file_size"></span> bytes
					</div>
					<div id="progress_sent" style="display: none;">
						Sent <span id="sent"></span> of <span id="file_size_sent"></span> bytes
					</div>

          <table >
							<thead>
								<tr><td>Preview</td>
								<td>Name</td>
								<td>Download</td>
							</tr></thead>
							<tbody id="download_table">

							</tbody>
						</table>

            <ul id="sent_files">

						</ul>
				</div>


          </div>


        </div>


      <div class="row">
        <div class="column">
          <div class="ui segment">
            <div class="ui blue button" id="voice_call">
              Call
            </div>
            <div class="ui yellow button" id="cancel_call" style="display:none">
              Cancel
            </div>
            <div class="ui red button" id="end_call" style="display : none">
              End
            </div>
          </div>
          <div id="voice" style="display: none;">
            <audio id="their_voice" controls="" autoplay=""></audio>
          </div>
          <div class="ui segment">
            <div class="ui blue button" id="video_call">
              Call
            </div>
            <div class="ui yellow button" id="cancel_video_call" style="display:none">
              Cancel
            </div>
            <div class="ui red button" id="end_video_call" style="display : none">
              End
            </div>
          </div>
          <video id="their-video" width="50%" height="50%" style="z-index: 5; position: relative; margin-left: auto; margin-right: auto;" autoplay=""></video>
          <div id="my-video-div">
          						<video id="my-video" muted="true" width="180" height="120" autoplay=""></video>
          					</div>

        </div>
      </div>



      <div class="row">
        <div class="column">


          <section id="chess_section">
    			<div style="text-align:center">
    				<h1>Play Chess</h1>
    			</div>
    			<div id="board_div"  align="center">
    				<div id="board" style="width:500px;"><div class="chessboard-63f37"><div class="board-b72b1" style="width: 464px;"><div class="row-5277c"><div class="square-55d63 white-1e1d7 square-a8" style="width: 58px; height: 58px" id="a8-bdb3-0f88-1b32-8c35-8470-fb7e-39b0-7325" data-square="a8"><div class="notation-322f9 numeric-fc462">8</div><img src="./assets/bR.png" alt="" class="piece-417db" data-piece="bR" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-b8" style="width: 58px; height: 58px" id="b8-8c97-8044-0ae2-1a5b-e4ad-451d-1bae-9e82" data-square="b8"><img src="./assets/bN.png" alt="" class="piece-417db" data-piece="bN" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-c8" style="width: 58px; height: 58px" id="c8-7d1c-e456-d1da-1544-4f58-7b14-f071-c6d9" data-square="c8"><img src="./assets/bB.png" alt="" class="piece-417db" data-piece="bB" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-d8" style="width: 58px; height: 58px" id="d8-9e26-dc7c-9b21-d13d-2dbd-5c9b-4803-acca" data-square="d8"><img src="./assets/bQ.png" alt="" class="piece-417db" data-piece="bQ" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-e8" style="width: 58px; height: 58px" id="e8-f411-6f3a-2d46-c312-0b51-22dd-6902-641b" data-square="e8"><img src="./assets/bK.png" alt="" class="piece-417db" data-piece="bK" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-f8" style="width: 58px; height: 58px" id="f8-f0c6-0d41-c1c1-c0e5-e9f9-bdd3-e01d-9d01" data-square="f8"><img src="./assets/bB.png" alt="" class="piece-417db" data-piece="bB" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-g8" style="width: 58px; height: 58px" id="g8-55cf-e39a-906b-1bda-ca38-a63a-a5ca-ea88" data-square="g8"><img src="./assets/bN.png" alt="" class="piece-417db" data-piece="bN" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-h8" style="width: 58px; height: 58px" id="h8-7b3e-133f-3e13-3a3c-7959-afae-7121-1067" data-square="h8"><img src="./assets/bR.png" alt="" class="piece-417db" data-piece="bR" style="width: 58px;height: 58px;"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 black-3c85d square-a7" style="width: 58px; height: 58px" id="a7-c64a-3157-e5bd-4bd3-1b56-792f-fd45-fd30" data-square="a7"><div class="notation-322f9 numeric-fc462">7</div><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-b7" style="width: 58px; height: 58px" id="b7-c37a-47ed-a971-c3e5-52cc-d99d-2b0a-1153" data-square="b7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-c7" style="width: 58px; height: 58px" id="c7-1ceb-49bd-cdd3-db74-da36-0214-d29f-9a2e" data-square="c7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-d7" style="width: 58px; height: 58px" id="d7-0d43-cfa1-1b77-e80f-a37c-55c9-2715-4f6b" data-square="d7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-e7" style="width: 58px; height: 58px" id="e7-6f54-03f0-cde1-0aae-6af9-05f0-6eed-d293" data-square="e7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-f7" style="width: 58px; height: 58px" id="f7-5de3-aab0-48bb-a072-6317-1bc5-b7ca-1ac9" data-square="f7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-g7" style="width: 58px; height: 58px" id="g7-28ad-c10f-79d9-85c6-22de-3764-0d53-0b03" data-square="g7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-h7" style="width: 58px; height: 58px" id="h7-db30-a90d-5b68-17c8-9852-77be-b16b-53b5" data-square="h7"><img src="./assets/bP.png" alt="" class="piece-417db" data-piece="bP" style="width: 58px;height: 58px;"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 white-1e1d7 square-a6" style="width: 58px; height: 58px" id="a6-46a1-91c8-9964-453c-4b70-9fa0-b497-8384" data-square="a6"><div class="notation-322f9 numeric-fc462">6</div></div><div class="square-55d63 black-3c85d square-b6" style="width: 58px; height: 58px" id="b6-8742-ab51-50f4-f164-0c40-754f-2dac-e6ca" data-square="b6"></div><div class="square-55d63 white-1e1d7 square-c6" style="width: 58px; height: 58px" id="c6-4dd9-60cc-691b-3b83-778f-ffc1-f7e9-e480" data-square="c6"></div><div class="square-55d63 black-3c85d square-d6" style="width: 58px; height: 58px" id="d6-49a9-752c-b120-06bf-21b7-2125-c31e-cc0d" data-square="d6"></div><div class="square-55d63 white-1e1d7 square-e6" style="width: 58px; height: 58px" id="e6-6cc1-b097-f204-917b-3154-f998-80ae-3677" data-square="e6"></div><div class="square-55d63 black-3c85d square-f6" style="width: 58px; height: 58px" id="f6-bc03-b8c5-7f85-faf7-2295-d014-b23b-320d" data-square="f6"></div><div class="square-55d63 white-1e1d7 square-g6" style="width: 58px; height: 58px" id="g6-e349-3017-937e-1fbe-31ff-448c-d6a8-b8fa" data-square="g6"></div><div class="square-55d63 black-3c85d square-h6" style="width: 58px; height: 58px" id="h6-488b-4d02-ad5e-831d-622c-0e06-6011-f877" data-square="h6"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 black-3c85d square-a5" style="width: 58px; height: 58px" id="a5-7279-fc5d-5ee6-a91f-27e6-2451-0814-2e3d" data-square="a5"><div class="notation-322f9 numeric-fc462">5</div></div><div class="square-55d63 white-1e1d7 square-b5" style="width: 58px; height: 58px" id="b5-2813-c963-f2ee-4cef-ec65-9def-3cdf-b03f" data-square="b5"></div><div class="square-55d63 black-3c85d square-c5" style="width: 58px; height: 58px" id="c5-6402-dce4-e259-7c81-ecb2-a36b-f804-9bc3" data-square="c5"></div><div class="square-55d63 white-1e1d7 square-d5" style="width: 58px; height: 58px" id="d5-0ddb-a2af-c449-80b5-4c93-ddd7-b119-3344" data-square="d5"></div><div class="square-55d63 black-3c85d square-e5" style="width: 58px; height: 58px" id="e5-555b-420f-5d28-3823-a1cb-bf41-a5d9-a67f" data-square="e5"></div><div class="square-55d63 white-1e1d7 square-f5" style="width: 58px; height: 58px" id="f5-150a-f498-de30-789b-eed8-6243-1782-a78b" data-square="f5"></div><div class="square-55d63 black-3c85d square-g5" style="width: 58px; height: 58px" id="g5-af0c-b6ea-9363-66e2-807c-dd2c-729a-6f4e" data-square="g5"></div><div class="square-55d63 white-1e1d7 square-h5" style="width: 58px; height: 58px" id="h5-26f4-619b-cb61-e6b9-8d91-ca45-3c7a-3525" data-square="h5"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 white-1e1d7 square-a4" style="width: 58px; height: 58px" id="a4-338b-89eb-7c40-2cb2-3dea-f935-fac7-d14f" data-square="a4"><div class="notation-322f9 numeric-fc462">4</div></div><div class="square-55d63 black-3c85d square-b4" style="width: 58px; height: 58px" id="b4-e6af-d0bc-aed3-22f8-ce61-ab09-af90-380c" data-square="b4"></div><div class="square-55d63 white-1e1d7 square-c4" style="width: 58px; height: 58px" id="c4-f7ef-3622-63db-96c7-91d0-768a-3663-e2e1" data-square="c4"></div><div class="square-55d63 black-3c85d square-d4" style="width: 58px; height: 58px" id="d4-f9d2-4921-1467-04f9-f8e7-9528-2ad7-b504" data-square="d4"></div><div class="square-55d63 white-1e1d7 square-e4" style="width: 58px; height: 58px" id="e4-b351-b9e8-026e-2065-077e-c086-bd6c-7687" data-square="e4"></div><div class="square-55d63 black-3c85d square-f4" style="width: 58px; height: 58px" id="f4-fcc9-baef-01b5-e482-3a3f-14c7-9a04-dc65" data-square="f4"></div><div class="square-55d63 white-1e1d7 square-g4" style="width: 58px; height: 58px" id="g4-0ddb-e908-4052-b209-df56-0f4f-0cd4-fa08" data-square="g4"></div><div class="square-55d63 black-3c85d square-h4" style="width: 58px; height: 58px" id="h4-619c-e9f7-9a3c-8dfd-f28a-5416-b33d-f34d" data-square="h4"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 black-3c85d square-a3" style="width: 58px; height: 58px" id="a3-81be-b228-4349-fce3-d0b9-2762-e134-e95e" data-square="a3"><div class="notation-322f9 numeric-fc462">3</div></div><div class="square-55d63 white-1e1d7 square-b3" style="width: 58px; height: 58px" id="b3-c2ff-11bf-2de2-2851-4b4f-9eb2-6138-176e" data-square="b3"></div><div class="square-55d63 black-3c85d square-c3" style="width: 58px; height: 58px" id="c3-b713-8b46-8a89-df42-c384-cd7b-b193-490e" data-square="c3"></div><div class="square-55d63 white-1e1d7 square-d3" style="width: 58px; height: 58px" id="d3-8276-359f-f1a8-78b6-b7ed-a3cd-3c67-fd6c" data-square="d3"></div><div class="square-55d63 black-3c85d square-e3" style="width: 58px; height: 58px" id="e3-1bc0-5729-3d98-ba70-bfc1-7dca-aa04-b0b8" data-square="e3"></div><div class="square-55d63 white-1e1d7 square-f3" style="width: 58px; height: 58px" id="f3-f1f2-f11f-6683-26a9-c244-3f4a-c317-c6b5" data-square="f3"></div><div class="square-55d63 black-3c85d square-g3" style="width: 58px; height: 58px" id="g3-3036-96ff-60d0-fbb4-9356-032a-11e5-2274" data-square="g3"></div><div class="square-55d63 white-1e1d7 square-h3" style="width: 58px; height: 58px" id="h3-931f-c7c5-d74e-74bb-5cd5-201c-a5a5-46da" data-square="h3"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 white-1e1d7 square-a2" style="width: 58px; height: 58px" id="a2-0ceb-603e-eb8f-9a5a-c819-5600-6180-6924" data-square="a2"><div class="notation-322f9 numeric-fc462">2</div><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-b2" style="width: 58px; height: 58px" id="b2-0138-0610-88c9-52dd-ebd4-6871-ce71-c45e" data-square="b2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-c2" style="width: 58px; height: 58px" id="c2-5a1c-99d3-c89c-6173-4c74-a39a-8915-e2fe" data-square="c2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-d2" style="width: 58px; height: 58px" id="d2-f2cd-0318-bfe1-0449-bf3f-5d05-9489-caac" data-square="d2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-e2" style="width: 58px; height: 58px" id="e2-87a7-38ef-e013-8f5a-3e73-60f6-20bb-a241" data-square="e2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-f2" style="width: 58px; height: 58px" id="f2-5e04-4685-2b46-9469-164e-4d9c-4ef2-7462" data-square="f2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-g2" style="width: 58px; height: 58px" id="g2-bbfd-0ec4-bfa9-7116-afd3-7ff8-ba29-517b" data-square="g2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-h2" style="width: 58px; height: 58px" id="h2-fa6b-e21a-a6e2-7bfe-e28a-2082-29e5-f7ca" data-square="h2"><img src="./assets/wP.png" alt="" class="piece-417db" data-piece="wP" style="width: 58px;height: 58px;"></div><div class="clearfix-7da63"></div></div><div class="row-5277c"><div class="square-55d63 black-3c85d square-a1" style="width: 58px; height: 58px" id="a1-ac86-0de0-d66e-e799-6cab-c299-d6d6-05dc" data-square="a1"><div class="notation-322f9 alpha-d2270">a</div><div class="notation-322f9 numeric-fc462">1</div><img src="./assets/wR.png" alt="" class="piece-417db" data-piece="wR" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-b1" style="width: 58px; height: 58px" id="b1-208b-f929-b20d-73a3-4d31-1eb5-b850-fdcb" data-square="b1"><div class="notation-322f9 alpha-d2270">b</div><img src="./assets/wN.png" alt="" class="piece-417db" data-piece="wN" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-c1" style="width: 58px; height: 58px" id="c1-0f13-0e4b-f4dc-a44b-8111-4094-89c9-4640" data-square="c1"><div class="notation-322f9 alpha-d2270">c</div><img src="./assets/wB.png" alt="" class="piece-417db" data-piece="wB" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-d1" style="width: 58px; height: 58px" id="d1-c153-41eb-8b43-01d8-ad51-930d-5a3e-a77c" data-square="d1"><div class="notation-322f9 alpha-d2270">d</div><img src="./assets/wQ.png" alt="" class="piece-417db" data-piece="wQ" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-e1" style="width: 58px; height: 58px" id="e1-e540-8ecd-a999-d777-8ad0-4c77-e8a2-ae0c" data-square="e1"><div class="notation-322f9 alpha-d2270">e</div><img src="./assets/wK.png" alt="" class="piece-417db" data-piece="wK" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-f1" style="width: 58px; height: 58px" id="f1-ed91-51cc-5c33-d8ea-88f6-541a-84aa-15fa" data-square="f1"><div class="notation-322f9 alpha-d2270">f</div><img src="./assets/wB.png" alt="" class="piece-417db" data-piece="wB" style="width: 58px;height: 58px;"></div><div class="square-55d63 black-3c85d square-g1" style="width: 58px; height: 58px" id="g1-f680-f26a-c57a-ea93-3a4f-d628-0dcb-9a9b" data-square="g1"><div class="notation-322f9 alpha-d2270">g</div><img src="./assets/wN.png" alt="" class="piece-417db" data-piece="wN" style="width: 58px;height: 58px;"></div><div class="square-55d63 white-1e1d7 square-h1" style="width: 58px; height: 58px" id="h1-c6f4-76a6-b46b-a0e3-69c8-c1d2-ad22-1ebe" data-square="h1"><div class="notation-322f9 alpha-d2270">h</div><img src="./assets/wR.png" alt="" class="piece-417db" data-piece="wR" style="width: 58px;height: 58px;"></div><div class="clearfix-7da63"></div></div></div></div></div>

    				<div>
    					<div>
    						<button  id="chess_new_game">New Game</button>
    						<button  id="chess_flip_board">Flip Board</button>
    					</div>
    				</div>

    			</div>
    			<div style="text-align:center;">
    				<br>
    				<div id="chess_status">White to move</div>
    			</div>
    		</section>


        </div>
      </div>


      <div class="ui row">
        <div class="column">
          <h3>Simple Snake Game</h3>
          <canvas id="stage" height="400" width="520" style="border: 2px solid rgb(151, 149,149);"></canvas>
        </div>
<!-- 
        <script>
          /**
 * Namespace
 */
var Game      = Game      || {};
var Keyboard  = Keyboard  || {}; 
var Component = Component || {};

/**
 * Keyboard Map
 */
Keyboard.Keymap = {
  65: 'left',
  87: 'up',
  68: 'right',
  83: 'down'
};


/**
 * Keyboard Events
 */
Keyboard.ControllerEvents = function() {
  
  // Setts
  var self      = this;
  this.pressKey = null;
  this.keymap   = Keyboard.Keymap;
  
  // Keydown Event
  document.onkeydown = function(event) {
    self.pressKey = event.which;
  };
  
  // Get Key
  this.getKey = function() {
    return this.keymap[this.pressKey];
  };
};

/**
 * Game Component Stage
 */
Component.Stage = function(canvas, conf) {  
  
  // Sets
  this.keyEvent  = new Keyboard.ControllerEvents();
  this.width     = canvas.width;
  this.height    = canvas.height;
  this.length    = [];
  this.food      = {};
  this.score     = 0;
  this.direction = 'right';
  this.conf      = {
    cw   : 10,
    size : 5,
    fps  : 1000
  };
  
  // Merge Conf
  if (typeof conf == 'object') {
    for (var key in conf) {
      if (conf.hasOwnProperty(key)) {
        this.conf[key] = conf[key];
      }
    }
  }
  
};

/**
 * Game Component Snake
 */
Component.Snake = function(canvas, conf) {
  
  // Game Stage
  this.stage = new Component.Stage(canvas, conf);
  
  // Init Snake
  this.initSnake = function() {
    
    // Itaration in Snake Conf Size
    for (var i = 0; i < this.stage.conf.size; i++) {
      
      // Add Snake Cells
      this.stage.length.push({x: i, y:0});
		}
	};
  
  // Call init Snake
  this.initSnake();
  
  // Init Food  
  this.initFood = function() {
		
    // Add food on stage
    this.stage.food = {
			x: Math.round(Math.random() * (this.stage.width - this.stage.conf.cw) / this.stage.conf.cw), 
			y: Math.round(Math.random() * (this.stage.height - this.stage.conf.cw) / this.stage.conf.cw), 
		};
	};
  
  // Init Food
  this.initFood();
  
  // Restart Stage
  this.restart = function() {
    this.stage.length            = [];
    this.stage.food              = {};
    this.stage.score             = 0;
    this.stage.direction         = 'right';
    this.stage.keyEvent.pressKey = null;
    this.initSnake();
    this.initFood();
  };
};

/**
 * Game Draw
 */
Game.Draw = function(context, snake) {
  
  // Draw Stage
  this.drawStage = function() {
    
    // Check Keypress And Set Stage direction
    var keyPress = snake.stage.keyEvent.getKey(); 
    if (typeof(keyPress) != 'undefined') {
      snake.stage.direction = keyPress;
    }
    
    // Draw White Stage
		context.fillStyle = "white";
		context.fillRect(0, 0, snake.stage.width, snake.stage.height);
		
    // Snake Position
    var nx = snake.stage.length[0].x;
		var ny = snake.stage.length[0].y;
		
    // Add position by stage direction
    switch (snake.stage.direction) {
      case 'right':
        nx++;
        break;
      case 'left':
        nx--;
        break;
      case 'up':
        ny--;
        break;
      case 'down':
        ny++;
        break;
    }
    
    // Check Collision
    if (this.collision(nx, ny) == true) {
      snake.restart();
      return;
    }
    
    // Logic of Snake food
    if (nx == snake.stage.food.x && ny == snake.stage.food.y) {
      var tail = {x: nx, y: ny};
      snake.stage.score++;
      snake.initFood();
    } else {
      var tail = snake.stage.length.pop();
      tail.x   = nx;
      tail.y   = ny;	
    }
    snake.stage.length.unshift(tail);
    
    // Draw Snake
    for (var i = 0; i < snake.stage.length.length; i++) {
      var cell = snake.stage.length[i];
      this.drawCell(cell.x, cell.y);
    }
    
    // Draw Food
    this.drawCell(snake.stage.food.x, snake.stage.food.y);
    
    // Draw Score
    context.fillText('Score: ' + snake.stage.score, 5, (snake.stage.height - 5));
  };
  
  // Draw Cell
  this.drawCell = function(x, y) {
    context.fillStyle = 'rgb(170, 170, 170)';
    context.beginPath();
    context.arc((x * snake.stage.conf.cw + 6), (y * snake.stage.conf.cw + 6), 4, 0, 2*Math.PI, false);    
    context.fill();
  };
  
  // Check Collision with walls
  this.collision = function(nx, ny) {  
    if (nx == -1 || nx == (snake.stage.width / snake.stage.conf.cw) || ny == -1 || ny == (snake.stage.height / snake.stage.conf.cw)) {
      return true;
    }
    return false;    
	}
};


/**
 * Game Snake
 */
Game.Snake = function(elementId, conf) {
  
  // Sets
  var canvas   = document.getElementById(elementId);
  var context  = canvas.getContext("2d");
  var snake    = new Component.Snake(canvas, conf);
  var gameDraw = new Game.Draw(context, snake);
  
  // Game Interval
  setInterval(function() {gameDraw.drawStage();}, snake.stage.conf.fps);
};


/**
 * Window Load
 */
window.onload = function() {
  // var snake = new Game.Snake('stage', {fps: 100, size: 9});
};
        </script> -->
      </div>


      <div class="ui row">
        <div class="column">
          <canvas id="snake" width="450" height="450"></canvas>
          <div class="ui blue button" onclick="shouldStartGame()">Start</div>
        </div>
        <script>

        function shouldStartGame(){
          send('{"start_snake_game":"true"}');
          
          

        }
        function snakeGameStart(){
	//Canvas stuff 




	var canvas = $("#snake")[0];
	var ctx = canvas.getContext("2d");
	var w = $("#snake").width();
	var h = $("#snake").height();
	
	//Lets save the cell width in a variable for easy control
	var cw = 10;

	
	var score;
  var score2;
   var level;
	
	//Lets create the snake now
	var snake_array; //an array of cells to make up the snake

  var snake_array2;
	
	function init()
	{
		d = "right"; //default direction
		create_snake();

    d2="right";
    create_snake2();
		create_food(); //Now we can see the food particle
		//finally lets display the score

		score = 0;
     level = 1;
     score2=0;
		
		//Lets move the snake now using a timer which will trigger the paint function
		//every 60ms
		if(typeof game_loop != "undefined") clearInterval(game_loop);
		game_loop = setInterval(paint, 1000);
	}
	init();
	
	function create_snake()
	{
		var length = 5; //Length of the snake
		snake_array = []; //Empty array to start with
		for(var i = length-1; i>=0; i--)
		{
			//This will create a horizontal snake starting from the top left
			snake_array.push({x: i, y:1});
		}

  
   
	}

  function create_snake2()
	{
		var length2 = 5; //Length of the snake
		snake_array2 = []; //Empty array to start with
		for(var l = length2-1; l>=0; l--)
		{

			//This will create a horizontal snake starting from the top left
			snake_array2.push({x: l, y:42});
		}
  

	}
	
  //Lets create the food now
  

	function create_food()
	{
    if(snake_upperPlayer){
		food = {
			x: Math.round(Math.random()*(w-cw)/cw), 
			y: Math.round(Math.random()*(h-cw)/cw), 
    };

    send('{"snake_food_update":"true","food_x":'+food.x+',"food_y":'+food.y+'}');

    
  }
		//This will create a cell with x/y between 0-44
		//Because there are 45(450/10) positions accross the rows and columns
	}
	
  //Lets paint the snake now
  
  
	function paint()
	{
		//To avoid the snake trail we need to paint the BG on every frame
		//Lets paint the canvas now
  
		ctx.fillStyle = "white";
		ctx.fillRect(0, 0, w-3, h-3);
		ctx.strokeStyle = "black";
		ctx.strokeRect(0, 0, w-2, h-3);
		
		//The movement code for the snake to come here.
		//The logic is simple
		//Pop out the tail cell and place it infront of the head cell
		var nx = snake_array[0].x;
		var ny = snake_array[0].y;


    var nx2 = snake_array2[0].x;
		var ny2 = snake_array2[0].y;


		//These were the position of the head cell.
		//We will increment it to get the new head position
    //Lets add proper direction based movement now
  
		if(d == "right") nx++;
		else if(d == "left") nx--;
		else if(d == "up") ny--;
		else if(d == "down") ny++;


    if(d2 == "right") nx2++;
		else if(d2 == "left") nx2--;
		else if(d2 == "up") ny2--;
		else if(d2 == "down") ny2++;

		
		//Lets add the game over clauses now
		//This will restart the game if the snake hits the wall
		//Lets add the code for body collision
		//Now if the head of the snake bumps into its body, the game will restart
		if(nx == -1 || nx >= w/cw || ny == -1 || ny >= h/cw || check_collision(nx, ny, snake_array))
		{
			//restart game
			//init();
			//Lets organize the code a bit now.
			return;
		}


    if(nx2 == -1 || nx2 == w/cw || ny2 == -1 || ny2 == h/cw || check_collision(nx2, ny2, snake_array2))
		{
			//restart game
			//init();
			//Lets organize the code a bit now.
			return;
		}
		
		//Lets write the code to make the snake eat the food
		//The logic is simple
		//If the new head position matches with that of the food,
		//Create a new head instead of moving the tail
		if(nx == food.x && ny == food.y)
		{
			var tail = {x: nx, y: ny};
			score++;

			//Create new food
			create_food();
		}
		else
		{
			var tail = snake_array.pop(); //pops out the last cell
			tail.x = nx; tail.y = ny;
		}
		//The snake can now eat the food.
		
		snake_array.unshift(tail); //puts back the tail as the first cell





    if(nx2 == food.x && ny2 == food.y)
		{
			var tail2 = {x: nx2, y: ny2};
			score2++;
       
			//Create new food
			create_food();
		}
		else
		{
			var tail2 = snake_array2.pop(); //pops out the last cell
			tail2.x = nx2; tail2.y = ny2;
      
		}
		//The snake can now eat the food.
		
		snake_array2.unshift(tail2); 
		
		for(var i = 0; i < snake_array.length; i++)
		{
			var c1 = snake_array[i];
			//Lets paint 10px wide cells
			paint_cell(c1.x, c1.y, "blue");
		}

    for(var i = 0; i < snake_array2.length; i++)
		{
			var c2 = snake_array2[i];
			//Lets paint 10px wide cells
			 paint_cell(c2.x, c2.y, "red");
		}
		
    //Lets paint the food
    // console.log(food);

		paint_cell(food.x, food.y, "red");
		//Lets paint the score
		
    var score_text = "Score: " + score;
     var level_text = "Level: " + level;
		ctx.fillText(score_text, 5, h-5);
     ctx.fillText(level_text, 60, h-5);

     var score_text2 = "Score: " + score2;
     var level_text = "Level: " + level;
		ctx.fillText(score_text2, 120, h-5);
	}
	
	//Lets first create a generic function to paint cells
	function paint_cell(x, y, color)
	{
    
		ctx.fillStyle = color;
    ctx.beginPath();
		ctx.arc(x*cw, y*cw,4,0,2 * Math.PI, false);
    
    ctx.fill();
	}
	
	function check_collision(x, y, array)
	{
		//This function will check if the provided x/y coordinates exist
		//in an array of cells or not
		for(var i = 0; i < array.length; i++)
		{
			if(array[i].x == x && array[i].y == y)
			 return true;
		}
		return false;
	}
	
	//Lets add the keyboard controls now
	$(document).keydown(function(e){
		var key = e.which;
    //We will add another clause to prevent reverse gear
    
    if(snake_upperPlayer){
		if(key == "65" && d != "right") d = "left";
		else if(key == "87" && d != "down") d = "up";
		else if(key == "68" && d != "left") d = "right";
    else if(key == "83" && d != "up") d = "down";
    send('{"snake_move":"'+d+'"}');

    }
    else{
      console.log("This done");
      if(key == "65" && d != "right") d2 = "left";
		else if(key == "87" && d != "down") d2 = "up";
		else if(key == "68" && d != "left") d2 = "right";
    else if(key == "83" && d != "up") d2 = "down";
    send('{"snake_move":"'+d2+'"}');


    }

    // if(key == "37" && d != "right") d2 = "left";
		// else if(key == "38" && d != "down") d2 = "up";
		// else if(key == "39" && d != "left") d2 = "right";
		// else if(key == "40" && d != "up") d2 = "down";


		//The snake is now keyboard controllable
	})
	
	
	
	
	
	
	
}
        </script>
      </div>








    </div>
    <div class="shout_box">
      <div class="header">Text Chat
        <span class="badge" id="unread_badge"></span>
        <span id="typing_msg" style="display: none;">typing</span>
        <!-- <div class="open_btn">&nbsp;</div> -->
      </div>
      <div class="toggle_chat" style="display: none;">
        <div class="message_box"></div>
        <div class="user_info">
          <input name="shout_message" id="shout_message" type="text" placeholder="Type Message Here">
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>
  <script type="text/javascript" src="./peer.js"></script>
  <script type="text/javascript" src="./responsivevoice.js"></script>
  <script type="text/javascript" src="./dataProcess.js"></script>
  
  <script type="text/javascript" src="./connection.js"></script>
  <script type="text/javascript" src="./chessboard.js"></script>
  <script type="text/javascript" src="./chess.js"></script>
  <script type="text/javascript" src="./chess_custom.js"></script>
  <script type="text/javascript" src="./paper-full.min.js"></script>

  <script type="text/javascript" src="./chat.js"></script>
  <script type="text/javascript" src="./test.js"></script>
  <script type="text/javascript" src="./voiceCall.js"></script>
  <script type="text/javascript" src="./videoCall.js"></script>
  <script type="text/javascript" src="./jquery.linkify.min.js"></script>
  <script type="text/javascript" src="./fileTransfer.js"></script>
  <script type="text/javascript" src="./fileDataProcess.js"></script>
  <script src="/socket.io-client/dist/socket.io.js"></script>
  <script src="/particles.js/particles.js"></script>
  <!-- <script type="text/javascript" src="/particlesEmbed.js"></script> -->
  <script src="/semantic-ui/dist/semantic.min.js"></script>



  <script>
    function send(data) {
      if (connection != null && connection.peer != null) {
        connection.send(data);
        console.log("Sent: " + data);
      } else {
        console.log("not connected");
      }

    }
  </script>

  <script type="text/paperscript" src="./draw.js" canvas="canvas">

</body>

</html>
