<!doctype html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="./semantic-ui/dist/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="./main.css">
</head>

<body>
  <div class="ui container">
    <div class="ui prompt modal">
      <div class="header" id="setPromptHeader"></div>
      <div class="content" id="setPromptContent">
      </div>
      <div class="actions">
        <div class="ui blue approve button">Ok</div>
      </div>
    </div>
    <div class="ui decision modal">
      <div class="header" id="setDecisionHeader">Decision</div>
      <div class="content" id="setDecisionContent">
      </div>

      <div class="actions">
        <div class="ui blue approve button">Ok</div>
        <div class="ui cancel button">Cancel</div>
      </div>
    </div>


    <div class="ui equal width center aligned padded grid">
      <div class="row" style="padding-top:40px">
        <div class="teal column">
        </div>
        <div class="teal column">
          <div class="ui text">Canvas</div>
        </div>
        <div class="teal column">
        </div>
      </div>
      <div class="row">
        <div class="column">
          <div class="ui segment" id="myId"></div>
        </div>
      </div>
      <div class="row">
        <div class="column">
          <div class="ui left icon input">
            <input type="text" placeholder="Partner id" id="partner">
            <i class="users icon"></i>
          </div>
          <div id="connect_notify"></div>
          <div class="ui button red" style="display:none" id="disconnect" onClick=disconnect()>Disconnect</div>
        </div>
      </div>
      <div class="row">
        <div class="ui input">
          <input type="text" placeholder="Your message" id="message">
        </div>
        <div class="ui blue button" onclick=test()>Test</div>
      </div>
      <div class="row">
        <div class="column">
          <section id="draw">
            <div class="row" style="padding-top: 20px">
              <canvas id="canvas" resize="" style="user-select: none; touch-action: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(1, 0, 0, 0);" width="1046" height="553" data-paper-scope="1">

              </canvas>

              <div class="ui button blue" id="drawMode" onCLick=toggleMode()>Point Mode</div>
              <div class="ui button blue" onclick="my_clear()">Clean</div>
            </div>
          </section>
        </div>

      </div>

      <div class="row" style="padding-top:30px">
        <div class="column">
          <div class="ui blue inverted segment">
            <h2>Send File</h2>
          </div>

          <div class="ui segment">
            <div>
              <label for="file" class="ui icon blue button">
          <i class="file icon"></i>
          Open File</label>
              <input type="file" id="file" style="display:none" onchange="openFile(event)">
            </div>
          </div>

          <div class="ui segment">
            <div id="progress" style="display: none;">
						Received <span id="downloaded"></span> of <span id="file_size"></span> bytes
					</div>
					<div id="progress_sent" style="display: none;">
						Sent <span id="sent"></span> of <span id="file_size_sent"></span> bytes
					</div>

          <table >
							<thead>
								<tr><td>Preview</td>
								<td>Name</td>
								<td>Download</td>
							</tr></thead>
							<tbody id="download_table">

							</tbody>
						</table>

            <ul id="sent_files">

						</ul>
				</div>


          </div>


        </div>


      <div class="row">
        <div class="column">
          <div class="ui segment">
            <div class="ui blue button" id="voice_call">
              Call
            </div>
            <div class="ui yellow button" id="cancel_call" style="display:none">
              Cancel
            </div>
            <div class="ui red button" id="end_call" style="display : none">
              End
            </div>
          </div>
          <div id="voice" style="display: none;">
            <audio id="their_voice" controls="" autoplay=""></audio>
          </div>
        </div>
      </div>

    </div>
    <div class="shout_box">
      <div class="header">Text Chat
        <span class="badge" id="unread_badge"></span>
        <span id="typing_msg" style="display: none;">typing</span>
        <!-- <div class="open_btn">&nbsp;</div> -->
      </div>
      <div class="toggle_chat" style="display: none;">
        <div class="message_box"></div>
        <div class="user_info">
          <input name="shout_message" id="shout_message" type="text" placeholder="Type Message Here">
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- <script>
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo(200,100);
ctx.stroke();
</script> -->
  <script type="text/javascript" src="./peer.js"></script>
  <script src="/jquery/dist/jquery.js"></script>
  <script type="text/javascript" src="./responsivevoice.js"></script>
  <script type="text/javascript" src="./connection.js"></script>
  <script type="text/javascript" src="./paper-full.min.js"></script>

  <script type="text/javascript" src="./chat.js"></script>
  <script type="text/javascript" src="./test.js"></script>
  <script type="text/javascript" src="./voiceCall.js"></script>
  <script type="text/javascript" src="./dataProcess.js"></script>
  <script type="text/javascript" src="./jquery.linkify.min.js"></script>
  <script type="text/javascript" src="./fileTransfer.js"></script>
  <script type="text/javascript" src="./fileDataProcess.js"></script>






  <script src="/socket.io-client/dist/socket.io.js"></script>
  <script src="/semantic-ui/dist/semantic.min.css"></script>
  <script src="/semantic-ui/dist/semantic.min.js"></script>



  <script>
    function send(data) {
      if (connection != null && connection.peer != null) {
        connection.send(data);
        console.log("Sent: " + data);
      } else {
        console.log("not connected");
      }

    }
  </script>

  <script type="text/paperscript" src="./draw.js" canvas="canvas">

</body>

</html>
